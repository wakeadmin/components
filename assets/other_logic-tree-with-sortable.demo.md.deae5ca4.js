import{n as I,aB as V,aA as B,q as l,B as d,C as m,h as G,az as N,aC as O,a as k,o as P,c as j,f as D,w as q,b as S,g as J}from"./app.78ede1ef.js";import{s as a}from"./chunks/LogicTreeOperation.module.30c96374.js";const L=I(({form:g,group:c,consumer:h})=>(V(t=>{var f,E,_;const e=(_=(E=(f=g.value)==null?void 0:f.values)==null?void 0:E.logic)==null?void 0:_.children;if(!e.length)return;const r=document.querySelectorAll(`.${a.subGroup} > .fat-logic-tree__list > .fat-logic-tree__group`),o=[];for(const p of r)o.push(new O(p,{group:"shared",draggable:".fat-logic-tree__content",onEnd(n){var x,C,F,y,A,b;if(n.from!==n.to){n.item.remove();const i=parseInt((C=(x=n.from.parentElement)==null?void 0:x.parentElement)==null?void 0:C.dataset.index,10),s=parseInt((y=(F=n.to.parentElement)==null?void 0:F.parentElement)==null?void 0:y.dataset.index,10),u=e[i],v=e[s],w=u.children.splice(n.oldIndex,1)[0];v.children.splice(n.newIndex,0,w),u.children.length||e.splice(i,1)}else{const i=parseInt((b=(A=n.from.parentElement)==null?void 0:A.parentElement)==null?void 0:b.dataset.index,10),s=e[i],u=s.children.splice(n.oldIndex,1)[0];s.children.splice(n.newIndex,0,u)}}}));t(()=>{o.forEach(p=>p.destroy())})}),()=>({submit:async t=>{console.log("\u4FDD\u5B58",t)},onValidateFailed:t=>{console.log("\u9A8C\u8BC1\u5931\u8D25",t)},children:[c({label:"\u903B\u8F91\u5206\u7EC4",prop:"logic",initialValue:{category:"group",id:"root",type:B.OR,children:[]},rules:{validator(t,e,r){var o;e==null||!((o=e.children)!=null&&o.length)?r(new Error("\u8BF7\u81F3\u5C11\u6DFB\u52A0\u4E00\u4E2A\u5206\u7EC4")):r()}},children:[h(t=>l(N,{basePath:"logic",modelValue:t.getFieldValue("logic"),"onUpdate:modelValue":e=>t.setFieldValue("logic",e),renderGroup:e=>{const r=e.current;return e.depth===0?d("div",{class:a.root,children:[r.children.length===0&&l("div",{class:a.empty,children:"\u8FD9\u91CC\u5565\u90FD\u6CA1\u6709"}),e.vdom,l(m,{class:a.button,onClick:()=>{e.append({category:"group",id:"group-"+r.children.length,type:B.AND,children:[{category:"node",id:"node",value:"Example"}]})},children:"\u6DFB\u52A0\u5206\u7EC4"})]}):d("div",{class:a.group,children:[d("h3",{children:["\u5206\u7EC4: ",e.index+1]}),l("div",{class:a.subGroup,"data-index":e.index,children:e.vdom})]})},renderNode:e=>{e.current;const r=()=>{const o=Date.now();e.insertAfter({category:"node",id:o,value:`Example ${o}`})};return d("div",{class:a.node,children:[l(G,{prop:e.path+".value",rules:{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}}),d("div",{children:[e.index===0&&l(m,{onClick:r,children:"\u6DFB\u52A0"}),l(m,{onClick:e.remove,children:"\u5220\u9664"})]})]})}}))]}),c({label:"\u6570\u636E",children:[h(t=>l("pre",{children:l("code",{children:JSON.stringify(t.values,void 0,2)})}))]})]}))),T={class:"wk-demo"},R=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"other/logic-tree-with-sortable.demo.md","lastUpdated":1719389638000}'),U={name:"other/logic-tree-with-sortable.demo.md"},H=Object.assign(U,{setup(g){return(c,h)=>{const t=k("ClientOnly");return P(),j("div",null,[D(t,null,{default:q(()=>[S("div",T,[D(J(L))])]),_:1})])}}});export{R as __pageData,H as default};
